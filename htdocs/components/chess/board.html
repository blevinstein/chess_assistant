<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-ajax/core-xhr.html">

<polymer-element name="chess-board">
  <template>
    <core-xhr id="xhr"></core-xhr>
    <table>
      <template repeat="{{ rank in ranks }}">
        <tr>
          <template repeat="{{ file in files }}">
            <td>
            {{ grid[rank][file].piece }}
            </td>
          </template>
        </tr>
      </template>
    </table>
  </template>
  <script>
    Polymer({
      files: [0, 1, 2, 3, 4, 5, 6, 7],
      ranks: [0, 1, 2, 3, 4, 5, 6, 7],
      grid: [ ],
      load: function (newGrid) {
        this.grid = newGrid;
      },
      ready: function () {
        var self = this;
        this.$.xhr.request({url: "/new-board", callback: function (resp) {
            self.load(JSON.parse(resp));
          }});
      }
    });
  </script>
</polymer-element>
